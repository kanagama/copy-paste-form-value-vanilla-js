function formChangeEvent(){return document.querySelector("form").addEventListener("change",function(){saveForm()}),!0}function saveForm(){return!!existForm()&&(localStorage.setItem(getUrlHash(),JSON.stringify(getFormData())),!0)}function loadForm(){if(!existForm())return!1;var e=localStorage.getItem(getUrlHash());if(null===e)return!1;let t=JSON.parse(e);return Object.keys(t).forEach(function(e){setValue(e,t[e])}),!0}function existForm(){var e=document.querySelector("form");return!(null===e||e.length<=0)}function getUrlHash(){return window.location.href?btoa(window.location.href):""}function getFormData(){if(!existForm())return{};let t={};return document.querySelector("form").querySelectorAll("input, select, textarea").forEach(function(e){"hidden"===e.getAttribute("type")||"submit"===e.getAttribute("type")||"radio"===e.getAttribute("type")&&!0!==e.checked||(t[e.getAttribute("name")]=e.value)}),t}function clearStorage(){return localStorage.clear(),!0}function setValue(e,t){var r,e=document.getElementsByName(e);if("radio"!==e[0].type)return e[0].value=t,dispatch(e[0]),!0;for(r of e)if(r.value===t)return r.checked=!0,dispatch(r),!0;return!1}function dispatch(e){e.dispatchEvent(new Event("click")),e.dispatchEvent(new Event("change")),setTimeout(()=>{},20)}module.exports={dispatch:dispatch,formChangeEvent:formChangeEvent,saveForm:saveForm,loadForm:loadForm,existForm:existForm,getUrlHash:getUrlHash,getFormData:getFormData,setValue:setValue,clearStorage:clearStorage};