function formChangeEvent(){document.querySelector(`form`).addEventListener('change',function(){saveForm()})} function saveForm(){if(!existForm()){return!1} let formDatas={};for(let[key,value,]of getFormData()){if(key.indexOf('token')<0||document.getElementsByName(key)[0].type!=='hidden'){formDatas[key]=value}} localStorage.setItem(getUrlHash(),JSON.stringify(formDatas));return!0} function loadForm(){if(!existForm()){return!1} let storage=localStorage.getItem(getUrlHash());if(storage===null){return} let json=JSON.parse(storage);Object.keys(json).forEach(function(key){setValue(key,json[key])})} function existForm(){if(document.querySelector(`form`).length<=0){console.log("The form doesn't exist.");return!1} return!0} function getUrlHash(){return btoa(window.location.href)} function getFormData(){let form=document.querySelector(`form`);return new FormData(form)} function clearStorage(){localStorage.clear()} function setValue(key,value){let inputs=document.getElementsByName(key);if(inputs[0].type!=='radio'){inputs[0].value=value;return} for(let input of inputs){if(input.value===value){input.checked=!0;return}}}